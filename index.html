<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Real-Time Collaboration App</title>

    <!-- === CSS Styles === -->
    <style>
      /* Basic Reset & Layout */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        display: flex;
        flex-direction: column;
        height: 100vh;
        background: #f8f9fa; /* Light gray background for modern look */
      }

      header {
        background: linear-gradient(135deg, #4c81ff, #1e40af);
        color: white;
        padding: 16px;
        text-align: center;
      }

      /* Use Cases Toggle */
      #use-cases-button {
        padding: 12px 20px;
        background: #4c81ff;
        color: white;
        border: none;
        cursor: pointer;
        margin: 12px;
        font-size: 16px;
        border-radius: 4px;
        transition: background 0.2s ease;
      }
      #use-cases-button:hover {
        background: #3b5ecc;
      }

      /* Transition for fade in/out of Use Cases */
      #use-cases-container {
        max-height: 0;
        overflow: hidden;
        opacity: 0;
        transition: max-height 0.4s ease, opacity 0.4s ease;
        margin: 0 12px;
        background: #ffffff;
        border: 1px solid #ccc;
        padding: 0 12px;
        border-radius: 4px;
      }
      #use-cases-container.show {
        max-height: 300px;
        opacity: 1;
        padding: 12px;
      }
      #use-cases-container h3 {
        margin: 8px 0 12px;
      }
      #use-cases-container ul li {
        margin-bottom: 8px;
      }

      /* Main App Layout */
      .app-container {
        display: flex;
        flex: 1;
        overflow: hidden;
      }
      .editor {
        flex: 2;
        display: flex;
        flex-direction: column;
        padding: 16px;
        border-right: 1px solid #ddd;
        position: relative;
      }
      .toolbar {
        margin-bottom: 12px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      .toolbar button {
        padding: 6px 12px;
        border: 1px solid #ccc;
        background: #f9f9f9;
        cursor: pointer;
        border-radius: 4px;
        transition: background 0.2s;
      }
      .toolbar button:hover {
        background: #eaeaea;
      }
      .content-area {
        flex: 1;
        border: 1px solid #ccc;
        padding: 16px;
        overflow-y: auto;
        position: relative;
        border-radius: 4px;
        background: #ffffff;
      }
      /* Editor placeholder style */
      .placeholder {
        color: #aaa;
        pointer-events: none;
        position: absolute;
        top: 16px;
        left: 16px;
        font-style: italic;
      }

      /* Mouse Cursor Dots for other users */
      .user-cursor {
        position: absolute;
        border-radius: 50%;
        width: 12px;
        height: 12px;
        transform: translate(-50%, -50%);
        pointer-events: none;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .user-cursor::after {
        content: attr(data-name);
        position: absolute;
        top: 14px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.7);
        color: #fff;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 10px;
        white-space: nowrap;
      }

      /* "Add Comment" button near selection */
      #add-comment-btn {
        display: none; /* shown dynamically when user highlights text */
        position: absolute;
        padding: 8px 10px;
        background: #4c81ff;
        color: #fff;
        cursor: pointer;
        border: none;
        border-radius: 4px;
        font-size: 12px;
        z-index: 999;
      }
      #add-comment-btn:hover {
        background: #3b5ecc;
      }

      /* Sidebar */
      .sidebar {
        flex: 1;
        padding: 16px;
        background: #fefefe;
        overflow-y: auto;
      }
      .sidebar h2 {
        margin-bottom: 12px;
        font-size: 18px;
      }

      /* Responsive Layout (media query) */
      @media (max-width: 768px) {
        .app-container {
          flex-direction: column;
        }
        .editor {
          border-right: none;
          border-bottom: 1px solid #ccc;
        }
      }

      /* Message Section */
      #message-form {
        display: flex;
        gap: 8px;
        margin-bottom: 12px;
      }
      #message-input {
        flex: 1;
        padding: 10px;
        font-size: 14px;
        border-radius: 4px;
        border: 1px solid #ccc;
      }
      #message-form button {
        background: #4c81ff;
        border: none;
        color: #fff;
        cursor: pointer;
        border-radius: 4px;
        padding: 8px 14px;
        transition: background 0.2s ease;
      }
      #message-form button:hover {
        background: #3b5ecc;
      }

      .messages-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      /* Bubbles styling for messages */
      #messages {
        list-style: none;
        margin: 0;
        padding: 0;
      }
      .message-item {
        margin-bottom: 8px;
        display: flex;
        align-items: flex-end;
      }
      .message-content {
        max-width: 70%;
        padding: 8px 12px;
        border-radius: 16px;
        position: relative;
        font-size: 14px;
        line-height: 1.4;
        background: #e1eafc;
      }
      .message-user {
        font-weight: bold;
        margin-bottom: 4px;
      }
      .message-options {
        margin-left: 8px;
      }
      .message-options button {
        background: #999;
        border: none;
        border-radius: 4px;
        color: #fff;
        font-size: 12px;
        padding: 4px 6px;
        cursor: pointer;
        margin-bottom: 4px;
      }
      .message-options button:hover {
        background: #777;
      }

      /* Typing indicator bubble */
      .typing-bubble {
        display: inline-block;
        padding: 6px 10px;
        background: #c8f7c5;
        border-radius: 16px;
        margin-bottom: 8px;
        font-size: 14px;
      }

      /* Comments List in sidebar */
      h3.comments-title {
        margin-top: 24px;
        font-size: 16px;
        border-top: 1px solid #ccc;
        padding-top: 12px;
      }
      #comments {
        list-style: none;
        margin: 0;
        padding: 0;
      }
      #comments li {
        padding: 10px;
        margin-bottom: 12px;
        background: #ffffff;
        border: 1px solid #ddd;
        border-radius: 6px;
        position: relative;
        font-size: 14px;
      }
      #comments li .comment-text {
        margin-right: 60px;
      }
      .comment-author {
        font-weight: bold;
        display: block;
        margin-bottom: 4px;
      }
      /* Edit / Delete comment buttons */
      #comments li .edit-comment,
      #comments li .delete-comment {
        position: absolute;
        top: 10px;
        background: #666;
        color: #fff;
        border: none;
        cursor: pointer;
        padding: 4px 6px;
        font-size: 12px;
        border-radius: 4px;
      }
      #comments li .edit-comment {
        right: 40px;
      }
      #comments li .delete-comment {
        right: 10px;
        background: #e33f3f;
      }

      /* Real-time selection highlight in the editor */
      .realtime-highlight {
        background: #fcf3a2;
      }
    </style>
  </head>

  <body>
    <!-- === HEADER === -->
    <header>
      <h1>Real-Time Collaboration App</h1>
    </header>

    <!-- === USE CASES TOGGLE BUTTON AND CONTAINER === -->
    <button id="use-cases-button" title="Show/Hide Use Cases">
      Show/Hide Use Cases
    </button>
    <div id="use-cases-container">
      <h3>Use Cases:</h3>
      <ul>
        <li>
          <strong>Real-Time Speech Notes:</strong> As students speak,
          instructors and peers type in real-time feedback.
        </li>
        <li>
          <strong>Speaking Practice with Instant Corrections:</strong>
          The instructor types corrections in real-time as students speak.
        </li>
        <li>
          <strong>Pronunciation Drills:</strong>
          Highlight problematic words and add comments with phonetic guides.
        </li>
      </ul>
    </div>

    <!-- === MAIN CONTAINER: Editor + Sidebar === -->
    <div class="app-container">
      <!-- Editor Pane -->
      <div class="editor">
        <!-- Toolbar -->
        <div id="toolbar" class="toolbar">
          <button data-action="bold" title="Bold (Ctrl + B)">B</button>
          <button data-action="italic" title="Italic (Ctrl + I)">I</button>
          <button data-action="underline" title="Underline (Ctrl + U)">
            U
          </button>
          <button data-action="backColor" title="Highlight selected text">
            HL
          </button>
          <!-- 3+ New toolbar actions -->
          <button data-action="strikeThrough" title="Strike Through">S</button>
          <button data-action="justifyLeft" title="Align Left">&#8676;</button>
          <button data-action="justifyCenter" title="Align Center">
            &#8677;
          </button>
          <button data-action="justifyRight" title="Align Right">
            &#8678;
          </button>
        </div>

        <!-- Content Area (editable) -->
        <div id="content-area" contenteditable="true" class="content-area">
          <!-- Actual user text will appear here. -->
          <!-- We'll place a .placeholder if empty -->
        </div>

        <!-- "Add Comment" button near the text selection -->
        <button id="add-comment-btn" title="Add a comment to selected text">
          Add Comment
        </button>
      </div>

      <!-- Sidebar: Messages + Comments -->
      <div class="sidebar">
        <div class="messages-header">
          <h2>Messages</h2>
          <button id="download-all-btn" title="Download all messages">
            Download All
          </button>
        </div>

        <!-- Message Form to send real-time messages -->
        <form id="message-form">
          <input
            type="text"
            id="message-input"
            placeholder="Type your message..."
            required
          />
          <button type="submit" title="Send Message">Send</button>
        </form>

        <!-- Real-time typing indicator container -->
        <div id="typing-indicators"></div>

        <!-- UL for messages -->
        <ul id="messages"></ul>

        <h3 class="comments-title">Comments</h3>
        <ul id="comments"></ul>
      </div>
    </div>

    <!-- === SCRIPTS (inline for example) === -->
    <script type="module">
      /****************************************
       * 1) FIREBASE SETUP
       ****************************************/
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";

      import {
        getDatabase,
        ref,
        set,
        onValue,
        push,
        remove,
        update,
        get,
      } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";

      // Replace these with your own config
      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyDNwApaLmfjk1cZBA0kZZMkYEnr39VZUyg",
        authDomain: "realtimecollabapp.firebaseapp.com",
        databaseURL: "https://realtimecollabapp-default-rtdb.firebaseio.com",
        projectId: "realtimecollabapp",
        storageBucket: "realtimecollabapp.firebasestorage.app",
        messagingSenderId: "955627884879",
        appId: "1:955627884879:web:4f5159d814956ed1ce753a",
        measurementId: "G-9311P887T1",
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);

      /****************************************
       * 2) USER NICKNAME (PROMPT ONCE)
       ****************************************/
      let nickname = localStorage.getItem("nickname");
      if (!nickname) {
        nickname = prompt("Enter your nickname:");
        if (!nickname) {
          nickname = "Anonymous_" + Math.floor(Math.random() * 1000);
        }
        localStorage.setItem("nickname", nickname);
      }

      /****************************************
       * 3) DOM ELEMENTS
       ****************************************/
      const contentArea = document.getElementById("content-area");
      const addCommentBtn = document.getElementById("add-comment-btn");
      const toolbar = document.getElementById("toolbar");
      const useCasesButton = document.getElementById("use-cases-button");
      const useCasesContainer = document.getElementById("use-cases-container");

      // Messages
      const messageForm = document.getElementById("message-form");
      const messageInput = document.getElementById("message-input");
      const messagesList = document.getElementById("messages");
      const downloadAllBtn = document.getElementById("download-all-btn");

      // Typing
      const typingIndicators = document.getElementById("typing-indicators");

      // Comments
      const commentsList = document.getElementById("comments");

      /****************************************
       * 4) USE CASES TOGGLE (WITH TRANSITION)
       ****************************************/
      useCasesButton.addEventListener("click", () => {
        useCasesContainer.classList.toggle("show");
      });

      /****************************************
       * 5) EDITOR PLACEHOLDER HANDLING
       ****************************************/
      function updatePlaceholder() {
        if (!contentArea.innerText.trim()) {
          if (!document.querySelector(".placeholder")) {
            const placeholderEl = document.createElement("div");
            placeholderEl.innerText = "Start typing here...";
            placeholderEl.className = "placeholder";
            contentArea.appendChild(placeholderEl);
          }
        } else {
          const ph = document.querySelector(".placeholder");
          if (ph) ph.remove();
        }
      }
      // Call initially
      updatePlaceholder();

      /****************************************
       * 6) REAL-TIME EDITOR SYNC & CURSOR MGMT
       ****************************************/
      let localChange = false; // prevent overwriting local user changes

      contentArea.addEventListener("input", () => {
        localChange = true;
        const content = contentArea.innerHTML;
        const selection = window.getSelection();
        const cursorPosition = selection.focusOffset || 0;

        set(ref(db, "content"), {
          content,
          cursorPosition,
          lastEditBy: nickname,
        });

        // Quick highlight flash
        contentArea.style.backgroundColor = "#f0f8ff";
        setTimeout(() => {
          contentArea.style.backgroundColor = "white";
        }, 400);

        updatePlaceholder();
      });

      onValue(ref(db, "content"), (snapshot) => {
        const data = snapshot.val();
        if (!data) return;

        if (!localChange) {
          if (data.content !== contentArea.innerHTML) {
            contentArea.innerHTML = data.content;
          }
          // restore cursor if data.cursorPosition
          const range = document.createRange();
          const selection = window.getSelection();
          let pos = data.cursorPosition || 0;

          if (contentArea.firstChild) {
            const nodeLength = contentArea.firstChild.length || 0;
            range.setStart(contentArea.firstChild, Math.min(pos, nodeLength));
            range.collapse(true);
            selection.removeAllRanges();
            selection.addRange(range);
          }
        }
        localChange = false;
        updatePlaceholder();
      });

      /****************************************
       * 7) REAL-TIME HIGHLIGHTING OF SELECTION
       ****************************************/
      let lastSelectionRange = null;

      function storeSelectionInDB(range) {
        if (!range) return;
        const startContainer = range.startContainer;
        const endContainer = range.endContainer;
        if (!startContainer || !endContainer) return;

        const fullText = contentArea.innerText;
        const selectionText = range.toString();
        const startIndex = fullText.indexOf(selectionText);
        if (startIndex < 0) return;

        set(ref(db, "liveSelection"), {
          text: selectionText,
          startIndex,
          length: selectionText.length,
          user: nickname,
        });
      }

      contentArea.addEventListener("mouseup", (e) => {
        const sel = window.getSelection();
        if (sel && sel.rangeCount > 0) {
          const range = sel.getRangeAt(0);
          if (!range.collapsed) {
            lastSelectionRange = range;
            storeSelectionInDB(range);

            addCommentBtn.style.display = "block";
            addCommentBtn.style.top = e.pageY - 40 + "px";
            addCommentBtn.style.left = e.pageX + "px";
          } else {
            // no selection
            set(ref(db, "liveSelection"), null);
            lastSelectionRange = null;
            addCommentBtn.style.display = "none";
          }
        }
      });

      document.addEventListener("click", (e) => {
        // if the click is not inside the content-area or the button
        if (!contentArea.contains(e.target) && e.target !== addCommentBtn) {
          addCommentBtn.style.display = "none";
        }
      });

      onValue(ref(db, "liveSelection"), (snapshot) => {
        const selData = snapshot.val();
        removeAllHighlights();
        if (!selData) return;
        highlightRange(selData.startIndex, selData.length);
      });

      function removeAllHighlights() {
        const highlighted = contentArea.querySelectorAll(".realtime-highlight");
        highlighted.forEach((span) => {
          const parent = span.parentNode;
          while (span.firstChild) {
            parent.insertBefore(span.firstChild, span);
          }
          parent.removeChild(span);
        });
      }

      function highlightRange(startIndex, length) {
        const text = contentArea.innerText;
        if (startIndex < 0 || startIndex + length > text.length) return;

        const before = text.slice(0, startIndex);
        const selectionText = text.slice(startIndex, startIndex + length);
        const after = text.slice(startIndex + length);

        const highlightedHTML = `
          ${escapeHtml(before)}
          <span class="realtime-highlight">${escapeHtml(selectionText)}</span>
          ${escapeHtml(after)}
        `;
        contentArea.innerHTML = highlightedHTML;
      }

      function escapeHtml(str) {
        return str
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;");
      }

      /****************************************
       * 8) MESSAGES: SEND, DISPLAY, DOWNLOAD ALL
       ****************************************/
      // Typing state management for messages
      let typingTimeout = null;
      const TYPING_TIMER_LENGTH = 2000; // 2s

      messageForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const text = messageInput.value.trim();
        if (!text) return;

        // Push to Firebase
        const newMessageRef = push(ref(db, "messages"));
        set(newMessageRef, {
          text,
          user: nickname,
          timestamp: Date.now(),
        });

        messageInput.value = "";
        // Clear typing state
        set(ref(db, `typing/${nickname}`), null);
      });

      messageInput.addEventListener("input", () => {
        // user is typing
        set(ref(db, `typing/${nickname}`), { user: nickname });
        // clear any previous timer
        if (typingTimeout) clearTimeout(typingTimeout);
        typingTimeout = setTimeout(() => {
          set(ref(db, `typing/${nickname}`), null);
        }, TYPING_TIMER_LENGTH);
      });

      // Listen for messages
      onValue(ref(db, "messages"), (snapshot) => {
        const messages = snapshot.val();
        messagesList.innerHTML = "";
        if (messages) {
          // sort by timestamp if you'd like, or just rely on push order
          // But to keep it simple, we'll just use object keys in order
          Object.keys(messages).forEach((key) => {
            const m = messages[key];
            const li = document.createElement("li");
            li.classList.add("message-item");

            // Bubble
            const bubble = document.createElement("div");
            bubble.classList.add("message-content");

            // Nickname + text
            bubble.innerHTML = `
              <div class="message-user">${m.user}</div>
              <div>${m.text}</div>
            `;
            li.appendChild(bubble);

            // Buttons (optional)
            const opts = document.createElement("div");
            opts.classList.add("message-options");

            // Edit button (if you want message editing)
            const editBtn = document.createElement("button");
            editBtn.innerText = "Edit";
            editBtn.title = "Edit this message";
            editBtn.addEventListener("click", () => editMessage(key, m.text));
            opts.appendChild(editBtn);

            // Delete button
            const delBtn = document.createElement("button");
            delBtn.innerText = "Del";
            delBtn.title = "Delete this message";
            delBtn.addEventListener("click", () => deleteMessage(key));
            opts.appendChild(delBtn);

            // Download single message
            const dlBtn = document.createElement("button");
            dlBtn.innerText = "DL";
            dlBtn.title = "Download this message";
            dlBtn.addEventListener("click", () => downloadMessage(m.text));
            opts.appendChild(dlBtn);

            li.appendChild(opts);
            messagesList.appendChild(li);
          });
        }
      });

      // Editing a message
      function editMessage(key, oldText) {
        const newText = prompt("Edit message:", oldText);
        if (newText !== null && newText.trim() !== "") {
          update(ref(db, `messages/${key}`), {
            text: newText,
          });
        }
      }

      // Deleting a message
      function deleteMessage(key) {
        remove(ref(db, `messages/${key}`));
      }

      // Download single message
      window.downloadMessage = (text) => {
        const blob = new Blob([text], { type: "text/plain" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "message.txt";
        a.click();
      };

      // Download all messages
      downloadAllBtn.addEventListener("click", async () => {
        const snap = await get(ref(db, "messages"));
        if (!snap.exists()) return;

        const messages = snap.val();
        let content = "";
        Object.values(messages).forEach((m) => {
          content += `[${m.user}] ${m.text}\n`;
        });

        const blob = new Blob([content], { type: "text/plain" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "all_messages.txt";
        a.click();
      });

      /****************************************
       * 9) TYPING INDICATORS
       ****************************************/
      onValue(ref(db, "typing"), (snapshot) => {
        const typingState = snapshot.val() || {};
        typingIndicators.innerHTML = "";

        Object.keys(typingState).forEach((k) => {
          if (k !== nickname) {
            // show that user is typing
            const bubble = document.createElement("div");
            bubble.classList.add("typing-bubble");
            bubble.innerText = `${typingState[k].user} is typing...`;
            typingIndicators.appendChild(bubble);
          }
        });
      });

      /****************************************
       * 10) COMMENTS (ADD, EDIT, DELETE)
       ****************************************/
      addCommentBtn.addEventListener("click", () => {
        if (!lastSelectionRange) return;
        const selectedText = lastSelectionRange.toString();
        if (!selectedText.trim()) return;

        const userComment = prompt("Add a comment for: " + selectedText);
        if (userComment) {
          const startIndex = contentArea.innerText.indexOf(selectedText);
          push(ref(db, "comments"), {
            text: selectedText,
            comment: userComment,
            startIndex,
            length: selectedText.length,
            timestamp: new Date().toISOString(),
            user: nickname,
          });
        }
        addCommentBtn.style.display = "none";
      });

      onValue(ref(db, "comments"), (snapshot) => {
        const comments = snapshot.val();
        commentsList.innerHTML = "";
        if (comments) {
          Object.keys(comments).forEach((key) => {
            const c = comments[key];
            const li = document.createElement("li");
            li.innerHTML = `
              <div class="comment-text">
                <span class="comment-author">${c.user}</span>
                <strong>${c.text}</strong><br/>
                <em>${c.comment}</em>
              </div>
              <button class="edit-comment" title="Edit Comment" onclick="editComment('${key}')">
                Edit
              </button>
              <button class="delete-comment" title="Delete Comment" onclick="deleteComment('${key}')">
                Del
              </button>
            `;
            commentsList.appendChild(li);
          });
        }
      });

      // Edit a comment
      window.editComment = (key) => {
        get(ref(db, `comments/${key}`)).then((snapshot) => {
          if (snapshot.exists()) {
            const commentData = snapshot.val();
            const newComment = prompt(
              "Edit your comment:",
              commentData.comment
            );
            if (newComment !== null && newComment.trim() !== "") {
              update(ref(db, `comments/${key}`), {
                comment: newComment,
              });
            }
          }
        });
      };

      // Delete a comment
      window.deleteComment = (key) => {
        remove(ref(db, `comments/${key}`));
      };

      /****************************************
       * 11) ENHANCED TOOLBAR (EXEC COMMAND)
       ****************************************/
      toolbar.addEventListener("click", (event) => {
        const action = event.target.dataset.action;
        if (action) {
          document.execCommand(action, false, null);
        }
      });

      /****************************************
       * 12) LIVE CURSOR TRACKING (MOUSEMOVE)
       ****************************************/
      // We'll store { x, y, color } for each user in "cursors" node
      // Create or pick a random color if not set
      let myCursorColor = localStorage.getItem("cursorColor");
      if (!myCursorColor) {
        // pick from a few pastel or bright shades
        const colors = [
          "#ff7777",
          "#77ff77",
          "#7777ff",
          "#ff77ff",
          "#77ffff",
          "#ffff77",
        ];
        myCursorColor = colors[Math.floor(Math.random() * colors.length)];
        localStorage.setItem("cursorColor", myCursorColor);
      }

      // Track local user mouse
      contentArea.addEventListener("mousemove", (e) => {
        const rect = contentArea.getBoundingClientRect();
        // get x,y relative to contentArea
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        set(ref(db, `cursors/${nickname}`), {
          x,
          y,
          color: myCursorColor,
          name: nickname,
        });
      });

      // Clear cursor from DB if user leaves the page
      window.addEventListener("beforeunload", () => {
        remove(ref(db, `cursors/${nickname}`));
      });

      // Listen for cursors
      onValue(ref(db, "cursors"), (snapshot) => {
        const cursorsData = snapshot.val() || {};
        // Remove all existing .user-cursor elements
        document.querySelectorAll(".user-cursor").forEach((el) => el.remove());

        // For each user except me, place a dot
        Object.keys(cursorsData).forEach((user) => {
          if (user !== nickname) {
            const c = cursorsData[user];
            const dot = document.createElement("div");
            dot.classList.add("user-cursor");
            dot.style.backgroundColor = c.color;
            dot.style.left = c.x + "px";
            dot.style.top = c.y + "px";
            dot.setAttribute("data-name", c.name);
            contentArea.appendChild(dot);
          }
        });
      });
    </script>
  </body>
</html>
